<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>2811</td> <td>-1422650527</td><td>apache/camel</td><td>cmueller</td><td>70b8b210562eb5f3645df159faca581ebb02ed0e</td> <td>None</td> <td>TODO cmueller: remove the \"httpBindingRef\" look up in Camel 3.0</td> <td>SATD_ADDED</td> <td>createEndpoint(String, String, Map<String, Object>)</td> <td>protected Endpoint createEndpoint(String uri, String remaining, Map<String, Object> parameters) throws Exception</td> <td>
    String addressUri = uri;
    if (!uri.startsWith("http4:") && !uri.startsWith("https4:")) {
        addressUri = remaining;
    }
    Map<String, Object> httpClientParameters = new HashMap<String, Object>(parameters);
    // http client can be configured from URI options
    HttpParams clientParams = configureHttpParams(parameters);
    // validate that we could resolve all httpClient. parameters as this component is lenient
    validateParameters(uri, parameters, "httpClient.");
    // TODO cmueller: remove the "httpBindingRef" look up in Camel 3.0
    HttpBinding httpBinding = resolveAndRemoveReferenceParameter(parameters, "httpBindingRef", HttpBinding.class);
    if (httpBinding == null) {
        httpBinding = resolveAndRemoveReferenceParameter(parameters, "httpBinding", HttpBinding.class);
    }
    // TODO cmueller: remove the "httpClientConfigurerRef" look up in Camel 3.0
    HttpClientConfigurer httpClientConfigurer = resolveAndRemoveReferenceParameter(parameters, "httpClientConfigurerRef", HttpClientConfigurer.class);
    if (httpClientConfigurer == null) {
        httpClientConfigurer = resolveAndRemoveReferenceParameter(parameters, "httpClientConfigurer", HttpClientConfigurer.class);
    }
    // TODO cmueller: remove the "httpContextRef" look up in Camel 3.0
    HttpContext httpContext = resolveAndRemoveReferenceParameter(parameters, "httpContextRef", HttpContext.class);
    if (httpContext == null) {
        httpContext = resolveAndRemoveReferenceParameter(parameters, "httpContext", HttpContext.class);
    }
    X509HostnameVerifier x509HostnameVerifier = resolveAndRemoveReferenceParameter(parameters, "x509HostnameVerifier", X509HostnameVerifier.class);
    if (x509HostnameVerifier == null) {
        x509HostnameVerifier = getX509HostnameVerifier();
    }
    // TODO cmueller: remove the "sslContextParametersRef" look up in Camel 3.0
    SSLContextParameters sslContextParameters = resolveAndRemoveReferenceParameter(parameters, "sslContextParametersRef", SSLContextParameters.class);
    if (sslContextParameters == null) {
        sslContextParameters = resolveAndRemoveReferenceParameter(parameters, "sslContextParameters", SSLContextParameters.class);
    }
    if (sslContextParameters == null) {
        sslContextParameters = getSslContextParameters();
    }
    String httpMethodRestrict = getAndRemoveParameter(parameters, "httpMethodRestrict", String.class);
    HeaderFilterStrategy headerFilterStrategy = resolveAndRemoveReferenceParameter(parameters, "headerFilterStrategy", HeaderFilterStrategy.class);
    UrlRewrite urlRewrite = resolveAndRemoveReferenceParameter(parameters, "urlRewrite", UrlRewrite.class);
    boolean secure = HttpHelper.isSecureConnection(uri);
    // create the configurer to use for this endpoint
    HttpClientConfigurer configurer = createHttpClientConfigurer(parameters, secure);
    URI endpointUri = URISupport.createRemainingURI(new URI(addressUri), httpClientParameters);
    // create the endpoint and set the http uri to be null
    HttpEndpoint endpoint = new HttpEndpoint(endpointUri.toString(), this, clientParams, clientConnectionManager, configurer);
    if (urlRewrite != null) {
        // let CamelContext deal with the lifecycle of the url rewrite
        // this ensures its being shutdown when Camel shutdown etc.
        getCamelContext().addService(urlRewrite);
        endpoint.setUrlRewrite(urlRewrite);
    }
    // configure the endpoint
    setProperties(endpoint, parameters);
    // The httpUri should be start with http or https
    String httpUriAddress = addressUri;
    if (addressUri.startsWith("http4")) {
        httpUriAddress = "http" + addressUri.substring(5);
    }
    if (addressUri.startsWith("https4")) {
        httpUriAddress = "https" + addressUri.substring(6);
    }
    // restructure uri to be based on the parameters left as we dont want to include the Camel internal options
    // build up the http uri
    URI uriHttpUriAddress = new URI(httpUriAddress);
    // validate http uri that end-user did not duplicate the http part that can be a common error
    String part = uriHttpUriAddress.getSchemeSpecificPart();
    if (part != null) {
        part = part.toLowerCase();
        if (part.startsWith("//http//") || part.startsWith("//https//") || part.startsWith("//http://") || part.startsWith("//https://")) {
            throw new ResolveEndpointFailedException(uri, "The uri part is not configured correctly. You have duplicated the http(s) protocol.");
        }
    }
    // determine the portnumber (special case: default portnumber)
    int port = getPort(uriHttpUriAddress);
    // we can not change the port of an URI, we must create a new one with an explicit port value
    URI httpUri = URISupport.createRemainingURI(new URI(uriHttpUriAddress.getScheme(), uriHttpUriAddress.getUserInfo(), uriHttpUriAddress.getHost(), port, uriHttpUriAddress.getPath(), uriHttpUriAddress.getQuery(), uriHttpUriAddress.getFragment()), parameters);
    endpoint.setHttpUri(httpUri);
    if (headerFilterStrategy != null) {
        endpoint.setHeaderFilterStrategy(headerFilterStrategy);
    } else {
        setEndpointHeaderFilterStrategy(endpoint);
    }
    endpoint.setBinding(getHttpBinding());
    if (httpBinding != null) {
        endpoint.setHttpBinding(httpBinding);
    }
    if (httpClientConfigurer != null) {
        endpoint.setHttpClientConfigurer(httpClientConfigurer);
    }
    if (httpMethodRestrict != null) {
        endpoint.setHttpMethodRestrict(httpMethodRestrict);
    }
    endpoint.setHttpContext(getHttpContext());
    if (httpContext != null) {
        endpoint.setHttpContext(httpContext);
    }
    // register port on schema registry
    registerPort(secure, x509HostnameVerifier, port, sslContextParameters);
    return endpoint;
</td> </tr></table></body></html>