<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>4069</td> <td>1242677695</td><td>GerritCodeReview/gerrit</td><td>Shawn O. Pearce</td><td>563dd769c4960f3a9d48f7520d82f1b53756b18e</td> <td>TODO Fix this gross hack so we aren't running git diff-tree for
an interdiff file side by side view.
</td> <td>TODO Fix this gross hack so we aren't running git diff-tree for
an interdiff file side by side view.
</td> <td>SATD_MOVED_FILE</td> <td>parseExecute()</td> <td>private FileHeader parseExecute() throws NoSuchEntityException, OrmException, IOException, NoDifferencesException</td> <td>
    // TODO Fix this gross hack so we aren't running git diff-tree for
    // an interdiff file side by side view.
    // 
    final PatchSet.Id psk = patch.getKey().getParentKey();
    final Map<PatchSet.Id, PatchSet> psMap = db.patchSets().toMap(db.patchSets().byChange(psk.getParentKey()));
    final List<String> args = new ArrayList<String>();
    args.add("git");
    args.add("--git-dir=.");
    args.add("diff-tree");
    args.add("--full-index");
    if (requestedVersions.size() > 2) {
        args.add("--cc");
    } else {
        args.add("--unified=5");
    }
    for (int i = 0; i < requestedVersions.size(); i++) {
        final PatchSet.Id psi = requestedVersions.get(i);
        if (psi == null) {
            throw new NoSuchEntityException();
        } else if (psi.equals(PatchSet.BASE)) {
            final PatchSet p = psMap.get(psk);
            if (p == null || p.getRevision() == null || p.getRevision().get() == null || !ObjectId.isId(p.getRevision().get())) {
                throw new NoSuchEntityException();
            }
            args.add(p.getRevision().get() + "^" + (i + 1));
        } else {
            final PatchSet p = psMap.get(psi);
            if (p == null || p.getRevision() == null || p.getRevision().get() == null || !ObjectId.isId(p.getRevision().get())) {
                throw new NoSuchEntityException();
            }
            args.add(p.getRevision().get());
        }
    }
    args.add("--");
    args.add(patch.getFileName());
    final Process proc = Runtime.getRuntime().exec(args.toArray(new String[args.size()]), null, repo.getDirectory());
    try {
        final org.spearce.jgit.patch.Patch p = new org.spearce.jgit.patch.Patch();
        proc.getOutputStream().close();
        proc.getErrorStream().close();
        p.parse(proc.getInputStream());
        proc.getInputStream().close();
        if (p.getFiles().isEmpty()) {
            throw new NoDifferencesException();
        }
        if (p.getFiles().size() != 1)
            throw new IOException("unexpected file count back");
        return p.getFiles().get(0);
    } finally {
        try {
            if (proc.waitFor() != 0) {
                throw new IOException("git diff-tree exited abnormally");
            }
        } catch (InterruptedException ie) {
        }
    }
</td> </tr></table></body></html>