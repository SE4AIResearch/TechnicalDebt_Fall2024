<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>4214</td> <td>1242677752</td><td>GerritCodeReview/gerrit</td><td>Ulrik Sjolin</td><td>44671f5c6929a8f05223dd359182610286ceb98a</td> <td>None</td> <td>Anonymous Git is claimed to be available, and this project
isn't secured. The anonymous Git daemon will be much more
efficient than our own SSH daemon, so prefer offering it.
</td> <td>SATD_ADDED</td> <td>displayDownload()</td> <td>private void displayDownload()</td> <td>
    final Branch.NameKey branchKey = changeDetail.getChange().getDest();
    final Project.NameKey projectKey = changeDetail.getChange().getProject();
    final String projectName = projectKey.get();
    final FlowPanel downloads = new FlowPanel();
    if (Gerrit.getConfig().isUseRepoDownload()) {
        // This site prefers usage of the 'repo' tool, so suggest
        // that for easy fetch.
        // 
        final StringBuilder r = new StringBuilder();
        r.append("repo download ");
        r.append(projectName);
        r.append(" ");
        r.append(changeDetail.getChange().getChangeId());
        r.append("/");
        r.append(patchSet.getPatchSetId());
        downloads.add(new CopyableLabel(r.toString()));
    }
    if (changeDetail.isAllowsAnonymous() && Gerrit.getConfig().getGitDaemonUrl() != null) {
        // Anonymous Git is claimed to be available, and this project
        // isn't secured. The anonymous Git daemon will be much more
        // efficient than our own SSH daemon, so prefer offering it.
        // 
        final StringBuilder r = new StringBuilder();
        r.append("git pull ");
        r.append(Gerrit.getConfig().getGitDaemonUrl());
        r.append(projectName);
        r.append(" ");
        r.append(patchSet.getRefName());
        downloads.add(new CopyableLabel(r.toString()));
    } else if (Gerrit.isSignedIn() && Gerrit.getUserAccount() != null && Gerrit.getConfig().getSshdAddress() != null && Gerrit.getUserAccount().getSshUserName() != null && Gerrit.getUserAccount().getSshUserName().length() > 0) {
        // The user is signed in and anonymous access isn't allowed.
        // Use our SSH daemon URL as its the only way they can get
        // to the project (that we know of anyway).
        // 
        final String sshAddr = Gerrit.getConfig().getSshdAddress();
        final StringBuilder r = new StringBuilder();
        r.append("git pull ssh://");
        r.append(Gerrit.getUserAccount().getSshUserName());
        r.append("@");
        if (sshAddr.startsWith("*:") || "".equals(sshAddr)) {
            r.append(Window.Location.getHostName());
        }
        r.append(sshAddr);
        r.append("/");
        r.append(projectName);
        r.append(" ");
        r.append(patchSet.getRefName());
        downloads.add(new CopyableLabel(r.toString()));
    }
    infoTable.setWidget(R_DOWNLOAD, 1, downloads);
</td> </tr></table></body></html>