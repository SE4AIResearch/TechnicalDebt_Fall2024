<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>5296</td> <td>-1009652426</td><td>apache/hadoop</td><td>Eli Collins</td><td>a196766ea07775f18ded69bd9e8d239f8cfd3ccc</td> <td>None</td> <td>can only happen because of a software bug. the bug should be fixed.</td> <td>SATD_ADDED</td> <td>updateCountForINodeWithQuota(INodeDirectory, INode.DirCounts, ArrayList<INode>)</td> <td>private static void updateCountForINodeWithQuota(INodeDirectory dir, INode.DirCounts counts, ArrayList<INode> nodesInPath)</td> <td>
    long parentNamespace = counts.nsCount;
    long parentDiskspace = counts.dsCount;
    // for self. should not call node.spaceConsumedInTree()
    counts.nsCount = 1L;
    counts.dsCount = 0L;
    /* We don't need nodesInPath if we could use 'parent' field in 
     * INode. using 'parent' is not currently recommended. */
    nodesInPath.add(dir);
    for (INode child : dir.getChildren()) {
        if (child.isDirectory()) {
            updateCountForINodeWithQuota((INodeDirectory) child, counts, nodesInPath);
        } else if (child.isLink()) {
            counts.nsCount += 1;
        } else {
            // reduce recursive calls
            counts.nsCount += 1;
            counts.dsCount += ((INodeFile) child).diskspaceConsumed();
        }
    }
    if (dir.isQuotaSet()) {
        ((INodeDirectoryWithQuota) dir).setSpaceConsumed(counts.nsCount, counts.dsCount);
        // check if quota is violated for some reason.
        if ((dir.getNsQuota() >= 0 && counts.nsCount > dir.getNsQuota()) || (dir.getDsQuota() >= 0 && counts.dsCount > dir.getDsQuota())) {
            // can only happen because of a software bug. the bug should be fixed.
            StringBuilder path = new StringBuilder(512);
            for (INode n : nodesInPath) {
                path.append('/');
                path.append(n.getLocalName());
            }
            NameNode.LOG.warn("Quota violation in image for " + path + " (Namespace quota : " + dir.getNsQuota() + " consumed : " + counts.nsCount + ")" + " (Diskspace quota : " + dir.getDsQuota() + " consumed : " + counts.dsCount + ").");
        }
    }
    // pop
    nodesInPath.remove(nodesInPath.size() - 1);
    counts.nsCount += parentNamespace;
    counts.dsCount += parentDiskspace;
</td> </tr></table></body></html>