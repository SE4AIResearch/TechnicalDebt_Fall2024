<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>3205</td> <td>-1422650285</td><td>apache/camel</td><td>Willem Jiang</td><td>db88eeda8e7c40b00b9f9ff015ed0b54e6922ea9</td> <td>None</td> <td>Need to retain the ByteBuffer for producer to consumer
TODO Remove this part of ByteBuffer right away</td> <td>SATD_ADDED</td> <td>done(boolean)</td> <td>public void done(boolean doneSync)</td> <td>
    try {
        NettyHttpMessage nettyMessage = exchange.hasOut() ? exchange.getOut(NettyHttpMessage.class) : exchange.getIn(NettyHttpMessage.class);
        if (nettyMessage != null) {
            FullHttpResponse response = nettyMessage.getHttpResponse();
            // Need to retain the ByteBuffer for producer to consumer
            // TODO Remove this part of ByteBuffer right away
            response.content().retain();
            if (response != null) {
                // the actual url is stored on the IN message in the getRequestBody method as its accessed on-demand
                String actualUrl = exchange.getIn().getHeader(Exchange.HTTP_URL, String.class);
                int code = response.getStatus() != null ? response.getStatus().code() : -1;
                log.debug("Http responseCode: {}", code);
                // if there was a http error code (300 or higher) then check if we should throw an exception
                if (code >= 300 && getConfiguration().isThrowExceptionOnFailure()) {
                    // operation failed so populate exception to throw
                    Exception cause = NettyHttpHelper.populateNettyHttpOperationFailedException(exchange, actualUrl, response, code, getConfiguration().isTransferException());
                    exchange.setException(cause);
                }
            }
        }
    } finally {
        // ensure we call the delegated callback
        callback.done(doneSync);
    }
</td> </tr></table></body></html>