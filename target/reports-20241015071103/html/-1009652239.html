<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>5487</td> <td>-1009652239</td><td>apache/hadoop</td><td>Eli Collins</td><td>a196766ea07775f18ded69bd9e8d239f8cfd3ccc</td> <td>None</td> <td>Exclude this task from next search because it is already
considered.</td> <td>SATD_ADDED</td> <td>killTasksWithLeastProgress(long)</td> <td>private void killTasksWithLeastProgress(long memoryStillInUsage)</td> <td>
    List<TaskAttemptID> tasksToKill = new ArrayList<TaskAttemptID>();
    List<TaskAttemptID> tasksToExclude = new ArrayList<TaskAttemptID>();
    // Find tasks to kill so as to get memory usage under limits.
    while (memoryStillInUsage > maxMemoryAllowedForAllTasks) {
        // Exclude tasks that are already marked for killing.
        // Note that we do not need to call isKillable() here because the logic
        // is contained in taskTracker.findTaskToKill()
        TaskInProgress task = taskTracker.findTaskToKill(tasksToExclude);
        if (task == null) {
            // couldn't find any more tasks to kill.
            break;
        }
        TaskAttemptID tid = task.getTask().getTaskID();
        if (processTreeInfoMap.containsKey(tid)) {
            ProcessTreeInfo ptInfo = processTreeInfoMap.get(tid);
            ProcfsBasedProcessTree pTree = ptInfo.getProcessTree();
            memoryStillInUsage -= pTree.getCumulativeVmem();
            tasksToKill.add(tid);
        }
        // Exclude this task from next search because it is already
        // considered.
        tasksToExclude.add(tid);
    }
    // Now kill the tasks.
    if (!tasksToKill.isEmpty()) {
        for (TaskAttemptID tid : tasksToKill) {
            String msg = "Killing one of the least progress tasks - " + tid + ", as the cumulative memory usage of all the tasks on " + "the TaskTracker exceeds virtual memory limit " + maxMemoryAllowedForAllTasks + ".";
            LOG.warn(msg);
            killTask(tid, msg);
        }
    } else {
        LOG.info("The total memory usage is overflowing TTs limits. " + "But found no alive task to kill for freeing memory.");
    }
</td> </tr></table></body></html>