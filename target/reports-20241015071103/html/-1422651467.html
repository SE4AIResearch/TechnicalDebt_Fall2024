<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>1124</td> <td>-1422651467</td><td>apache/camel</td><td>Claus Ibsen</td><td>bd90b856aeba8d0ebfbc13a0253bab4dec21269d</td> <td>None</td> <td>should be able to run in approx 5 sec on my local laptop.
we had once a performance degrade that caused this test to take 9x longer
so this is a safe guard that this should not happen again.
in case some slow AIX box can not run this in 10 sec or less, then we
should disable this timing as we want it to trigger on local bulds in case
it happens again</td> <td>SATD_ADDED</td> <td>testThreadProcessor()</td> <td>public void testThreadProcessor()</td> <td>
    long start = System.currentTimeMillis();
    try {
        CamelContext context = new DefaultCamelContext();
        final CountDownLatch latch = new CountDownLatch(ITERS);
        context.addRoutes(new RouteBuilder() {

            @Override
            public void configure() throws Exception {
                from("direct:a").thread(4).process(new Processor() {

                    public void process(Exchange ex) throws Exception {
                        latch.countDown();
                    }
                });
            }
        });
        final ProducerTemplate template = context.createProducerTemplate();
        final Endpoint e = context.getEndpoint("direct:a");
        context.start();
        for (int i = 0; i < ITERS; i++) {
            template.send(e, new SendingProcessor(i), new AsyncCallback() {

                public void done(boolean arg0) {
                // Do nothing here
                }
            });
        }
        latch.await();
        long delta = System.currentTimeMillis() - start;
        // should be able to run in approx 5 sec on my local laptop.
        // we had once a performance degrade that caused this test to take 9x longer
        // so this is a safe guard that this should not happen again.
        // in case some slow AIX box can not run this in 10 sec or less, then we
        // should disable this timing as we want it to trigger on local bulds in case
        // it happens again
        assertTrue("Should be faster than 10 sec, took: " + delta, delta < 10000);
        context.stop();
    } catch (Exception ex) {
        fail("Get the exception " + ex + "here");
        // Make sure we the threads will exit, or the test will hung
        System.exit(-1);
    }
</td> </tr></table></body></html>