<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>1143</td> <td>-1422651459</td><td>apache/camel</td><td>Claus Ibsen</td><td>51214cfaa27c774cccd8bd82347cd72509435c98</td> <td>None</td> <td>TODO: This code is not covered by existing unit test in camel-core, need to be tested</td> <td>SATD_ADDED</td> <td>chooseBestPossibleMethodInfo(Exchange, Collection<MethodInfo>, Object, List<MethodInfo>, List<MethodInfo>)</td> <td>private MethodInfo chooseBestPossibleMethodInfo(Exchange exchange, Collection<MethodInfo> operationList, Object body, List<MethodInfo> possibles, List<MethodInfo> possiblesWithException) throws AmbiguousMethodCallException</td> <td>
    Exception exception = ExpressionBuilder.exchangeExceptionExpression().evaluate(exchange, Exception.class);
    if (exception != null && possiblesWithException.size() == 1) {
        if (LOG.isTraceEnabled()) {
            LOG.trace("Exchange has exception set so we prefer method that also has exception as parameter");
        }
        // prefer the method that accepts exception in case we have an exception also
        return possiblesWithException.get(0);
    } else if (possibles.size() == 1) {
        return possibles.get(0);
    } else if (possibles.isEmpty()) {
        // TODO: This code is not covered by existing unit test in camel-core, need to be tested
        if (LOG.isTraceEnabled()) {
            LOG.trace("No poosible methods trying to convert body to parameter types");
        }
        // lets try converting
        Object newBody = null;
        MethodInfo matched = null;
        for (MethodInfo methodInfo : operationList) {
            Object value;
            try {
                value = convertToType(exchange, methodInfo.getBodyParameterType(), body);
                if (value != null) {
                    if (LOG.isTraceEnabled()) {
                        LOG.trace("Converted body from: " + body.getClass().getCanonicalName() + "to: " + methodInfo.getBodyParameterType().getCanonicalName());
                    }
                    if (newBody != null) {
                        // we already have found one new body that could be converted so now we have 2 methods
                        // and then its ambiguous
                        throw new AmbiguousMethodCallException(exchange, Arrays.asList(matched, methodInfo));
                    } else {
                        newBody = value;
                        matched = methodInfo;
                    }
                }
            } catch (NoTypeConversionAvailableException e) {
            // we can safely ignore this exception as we want a behaviour similar to
            // that if convertToType return null
            }
        }
        if (matched != null) {
            if (LOG.isTraceEnabled()) {
                LOG.trace("Setting converted body: " + body);
            }
            Message in = exchange.getIn();
            in.setBody(newBody);
            return matched;
        }
    } else {
        // if we only have a single method with custom annotations, lets use that one
        if (operationsWithCustomAnnotation.size() == 1) {
            MethodInfo answer = operationsWithCustomAnnotation.get(0);
            if (LOG.isTraceEnabled()) {
                LOG.trace("There are only one method with annotations so we choose it: " + answer);
            }
            return answer;
        }
        // phew try to choose among multiple methods with annotations
        return chooseMethodWithCustomAnnotations(exchange, possibles);
    }
    // cannot find a good method to use
    return null;
</td> </tr></table></body></html>