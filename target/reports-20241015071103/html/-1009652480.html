<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>5151</td> <td>-1009652480</td><td>apache/hadoop</td><td>Jitendra Nath Pandey</td><td>e05a6d1dce1b83bc2abe4eb2efc1afd51c8facd2</td> <td>None</td> <td>Doing a second call with faults disabled should return fine --
ie the internal state of the client or server should not be broken
by the failed call</td> <td>SATD_ADDED</td> <td>doErrorTest(Class<? extends LongWritable>, Class<? extends LongWritable>, Class<? extends LongWritable>, Class<? extends LongWritable>)</td> <td>private void doErrorTest(Class<? extends LongWritable> clientParamClass, Class<? extends LongWritable> serverParamClass, Class<? extends LongWritable> serverResponseClass, Class<? extends LongWritable> clientResponseClass) throws Exception</td> <td>
    // start server
    Server server = new TestServer(1, false, serverParamClass, serverResponseClass);
    InetSocketAddress addr = NetUtils.getConnectAddress(server);
    server.start();
    // start client
    WRITABLE_FAULTS_ENABLED = true;
    Client client = new Client(clientResponseClass, conf);
    try {
        LongWritable param = clientParamClass.newInstance();
        try {
            client.call(param, addr, null, null, 0, conf);
            fail("Expected an exception to have been thrown");
        } catch (Throwable t) {
            assertExceptionContains(t, "Injected fault");
        }
        // Doing a second call with faults disabled should return fine --
        // ie the internal state of the client or server should not be broken
        // by the failed call
        WRITABLE_FAULTS_ENABLED = false;
        client.call(param, addr, null, null, 0, conf);
    } finally {
        server.stop();
    }
</td> </tr></table></body></html>