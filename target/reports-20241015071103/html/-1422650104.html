<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>3617</td> <td>-1422650104</td><td>apache/camel</td><td>Andrea Cosentino</td><td>8fe4288f2a19d1b8894f65b04a7ac871983b8938</td> <td>None</td> <td>TODO: Add support for a HeaderFilterStrategy. See: org.apache.camel.component.jms.JmsBinding#shouldOutputHeader</td> <td>SATD_ADDED</td> <td>buildProperties(Exchange)</td> <td>public AMQP.BasicProperties.Builder buildProperties(Exchange exchange)</td> <td>
    AMQP.BasicProperties.Builder properties = new AMQP.BasicProperties.Builder();
    Message msg;
    if (exchange.hasOut()) {
        msg = exchange.getOut();
    } else {
        msg = exchange.getIn();
    }
    final Object contentType = msg.getHeader(RabbitMQConstants.CONTENT_TYPE);
    if (contentType != null) {
        properties.contentType(contentType.toString());
    }
    final Object priority = msg.getHeader(RabbitMQConstants.PRIORITY);
    if (priority != null) {
        properties.priority(Integer.parseInt(priority.toString()));
    }
    final Object messageId = msg.getHeader(RabbitMQConstants.MESSAGE_ID);
    if (messageId != null) {
        properties.messageId(messageId.toString());
    }
    final Object clusterId = msg.getHeader(RabbitMQConstants.CLUSTERID);
    if (clusterId != null) {
        properties.clusterId(clusterId.toString());
    }
    final Object replyTo = msg.getHeader(RabbitMQConstants.REPLY_TO);
    if (replyTo != null) {
        properties.replyTo(replyTo.toString());
    }
    final Object correlationId = msg.getHeader(RabbitMQConstants.CORRELATIONID);
    if (correlationId != null) {
        properties.correlationId(correlationId.toString());
    }
    final Object deliveryMode = msg.getHeader(RabbitMQConstants.DELIVERY_MODE);
    if (deliveryMode != null) {
        properties.deliveryMode(Integer.parseInt(deliveryMode.toString()));
    }
    final Object userId = msg.getHeader(RabbitMQConstants.USERID);
    if (userId != null) {
        properties.userId(userId.toString());
    }
    final Object type = msg.getHeader(RabbitMQConstants.TYPE);
    if (type != null) {
        properties.type(type.toString());
    }
    final Object contentEncoding = msg.getHeader(RabbitMQConstants.CONTENT_ENCODING);
    if (contentEncoding != null) {
        properties.contentEncoding(contentEncoding.toString());
    }
    final Object expiration = msg.getHeader(RabbitMQConstants.EXPIRATION);
    if (expiration != null) {
        properties.expiration(expiration.toString());
    }
    final Object appId = msg.getHeader(RabbitMQConstants.APP_ID);
    if (appId != null) {
        properties.appId(appId.toString());
    }
    final Object timestamp = msg.getHeader(RabbitMQConstants.TIMESTAMP);
    if (timestamp != null) {
        properties.timestamp(new Date(Long.parseLong(timestamp.toString())));
    }
    final Map<String, Object> headers = msg.getHeaders();
    Map<String, Object> filteredHeaders = new HashMap<String, Object>();
    // TODO: Add support for a HeaderFilterStrategy. See: org.apache.camel.component.jms.JmsBinding#shouldOutputHeader
    for (Map.Entry<String, Object> header : headers.entrySet()) {
        // filter header values.
        Object value = getValidRabbitMQHeaderValue(header.getValue());
        if (value != null) {
            filteredHeaders.put(header.getKey(), header.getValue());
        } else if (LOG.isDebugEnabled()) {
            if (header.getValue() == null) {
                LOG.debug("Ignoring header: {} with null value", header.getKey());
            } else {
                LOG.debug("Ignoring header: {} of class: {} with value: {}", new Object[] { header.getKey(), ObjectHelper.classCanonicalName(header.getValue()), header.getValue() });
            }
        }
    }
    properties.headers(filteredHeaders);
    return properties;
</td> </tr></table></body></html>