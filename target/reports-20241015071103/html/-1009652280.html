<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>5446</td> <td>-1009652280</td><td>apache/hadoop</td><td>Eli Collins</td><td>a196766ea07775f18ded69bd9e8d239f8cfd3ccc</td> <td>None</td> <td>by doing the above clock adjustments, we bring the progress rate of
taskID 3 lower than 4. For taskID 3, the rate is 85/317000
and for taskID 4, the rate is 20/65000. But when we ask for a spec task
now, we should get back taskID 4 (since that is expected to complete
later than taskID 3).</td> <td>SATD_ADDED</td> <td>testTaskLATEScheduling()</td> <td>public void testTaskLATEScheduling() throws IOException</td> <td>
    TaskAttemptID[] taskAttemptID = new TaskAttemptID[20];
    JobConf conf = new JobConf();
    conf.setSpeculativeExecution(true);
    conf.setNumMapTasks(5);
    conf.setNumReduceTasks(0);
    conf.setFloat(JobContext.SPECULATIVE_SLOWTASK_THRESHOLD, 0.5f);
    FakeJobInProgress job = new FakeJobInProgress(conf, jobTracker);
    job.initTasks();
    taskAttemptID[0] = job.findMapTask(trackers[0]);
    taskAttemptID[1] = job.findMapTask(trackers[1]);
    taskAttemptID[2] = job.findMapTask(trackers[2]);
    taskAttemptID[3] = job.findMapTask(trackers[3]);
    clock.advance(2000);
    job.finishTask(taskAttemptID[0]);
    job.finishTask(taskAttemptID[1]);
    job.finishTask(taskAttemptID[2]);
    clock.advance(250000);
    taskAttemptID[4] = job.findMapTask(trackers[3]);
    clock.advanceBySpeculativeLag();
    // by doing the above clock adjustments, we bring the progress rate of
    // taskID 3 lower than 4. For taskID 3, the rate is 85/317000
    // and for taskID 4, the rate is 20/65000. But when we ask for a spec task
    // now, we should get back taskID 4 (since that is expected to complete
    // later than taskID 3).
    job.progressMade(taskAttemptID[3], 0.85f);
    job.progressMade(taskAttemptID[4], 0.20f);
    taskAttemptID[5] = job.findMapTask(trackers[4]);
    assertEquals(taskAttemptID[5].getTaskID().getId(), 4);
    // Verify total speculative tasks by jobtracker instrumentation
    assertEquals("Total speculative maps", 2, fakeInst.numSpeculativeMaps);
    assertEquals("Total speculative reduces", 3, fakeInst.numSpeculativeReduces);
    LOG.info("Total speculative maps = " + fakeInst.numSpeculativeMaps);
    LOG.info("Total speculative reduces = " + fakeInst.numSpeculativeReduces);
</td> </tr></table></body></html>