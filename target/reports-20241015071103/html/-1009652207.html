<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>5519</td> <td>-1009652207</td><td>apache/hadoop</td><td>Eli Collins</td><td>a196766ea07775f18ded69bd9e8d239f8cfd3ccc</td> <td>None</td> <td>work dir should still exist and cleanup queue should be empty</td> <td>SATD_ADDED</td> <td>validateRemoveTaskFiles(boolean, boolean, TaskInProgress)</td> <td> void validateRemoveTaskFiles(boolean needCleanup, boolean jvmReuse, TaskInProgress tip) throws IOException</td> <td>
    // create files and set permissions 555. Verify if task controller sets
    // the permissions for TT to delete the taskDir or workDir
    String dir = (!needCleanup || jvmReuse) ? TaskTracker.getTaskWorkDir(task.getUser(), task.getJobID().toString(), taskId.toString(), task.isTaskCleanupTask()) : TaskTracker.getLocalTaskDir(task.getUser(), task.getJobID().toString(), taskId.toString(), task.isTaskCleanupTask());
    Path[] paths = tracker.getLocalFiles(localizedJobConf, dir);
    assertTrue("No paths found", paths.length > 0);
    for (Path p : paths) {
        if (tracker.getLocalFileSystem().exists(p)) {
            createFileAndSetPermissions(localizedJobConf, p);
        }
    }
    InlineCleanupQueue cleanupQueue = new InlineCleanupQueue();
    tracker.setCleanupThread(cleanupQueue);
    tip.removeTaskFiles(needCleanup, taskId);
    if (jvmReuse) {
        // work dir should still exist and cleanup queue should be empty
        assertTrue("cleanup queue is not empty after removeTaskFiles() in case " + "of jvm reuse.", cleanupQueue.isQueueEmpty());
        boolean workDirExists = false;
        for (Path p : paths) {
            if (tracker.getLocalFileSystem().exists(p)) {
                workDirExists = true;
            }
        }
        assertTrue("work dir does not exist in case of jvm reuse", workDirExists);
        // now try to delete the work dir and verify that there are no stale paths
        JvmManager.deleteWorkDir(tracker, task);
    }
    assertTrue("Some task files are not deleted!! Number of stale paths is " + cleanupQueue.stalePaths.size(), cleanupQueue.stalePaths.size() == 0);
</td> </tr></table></body></html>