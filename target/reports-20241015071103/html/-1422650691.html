<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>2535</td> <td>-1422650691</td><td>apache/camel</td><td>Christian Mueller</td><td>c13c776b87aa69b601613c65f8d9f0b343d07a84</td> <td>None</td> <td>TODO -  Is it the right place to define static resources ?</td> <td>SATD_ADDED</td> <td>connect(WebsocketProducerConsumer)</td> <td>public void connect(WebsocketProducerConsumer prodcon) throws Exception</td> <td>
    Server server = null;
    String baseResource = null;
    WebsocketEndpoint endpoint = prodcon.getEndpoint();
    String connectorKey = getConnectorKey(endpoint);
    synchronized (CONNECTORS) {
        ConnectorRef connectorRef = CONNECTORS.get(connectorKey);
        if (connectorRef == null) {
            Connector connector;
            if (endpoint.getSslContextParameters() != null) {
                connector = getSslSocketConnector(endpoint.getSslContextParameters());
            } else {
                connector = new SelectChannelConnector();
            }
            LOG.debug("Jetty Connector added : " + connector.getName());
            if (port != null) {
                connector.setPort(port);
            } else {
                connector.setPort(endpoint.getPort());
            }
            if (host != null) {
                connector.setHost(host);
            } else {
                connector.setHost(endpoint.getHost());
            }
            connector.setHost(endpoint.getHost());
            // TODO -  Is it the right place to define static resources ?
            if (endpoint.getHome() != null) {
                ServletContextHandler context = new ServletContextHandler(server, "/", ServletContextHandler.NO_SECURITY | ServletContextHandler.NO_SESSIONS);
                if (endpoint.getHome().startsWith("classpath:")) {
                    baseResource = ObjectHelper.after(endpoint.getHome(), "classpath:");
                    LOG.debug("Using base resource from classpath: {}", baseResource);
                    context.setBaseResource(new JettyClassPathResource(getCamelContext().getClassResolver(), baseResource));
                } else {
                    LOG.debug("Using base resource: {}", baseResource);
                    context.setResourceBase(baseResource);
                }
                DefaultServlet defaultServlet = new DefaultServlet();
                ServletHolder holder = new ServletHolder(defaultServlet);
                // avoid file locking on windows
                // http://stackoverflow.com/questions/184312/how-to-make-jetty-dynamically-load-static-pages
                holder.setInitParameter("useFileMappedBuffer", "false");
                context.addServlet(holder, "/");
            }
            // Create Server and add connector
            server = createServer();
            if (endpoint.isEnableJmx()) {
                enableJmx(server);
            }
            server.addConnector(connector);
            // Create ServletContextHandler
            context = createContext(server, connector, endpoint.getHandlers());
            // Don't provide a Servlet object as Producer/Consumer will create them later on
            connectorRef = new ConnectorRef(server, connector, null);
            // must enable session before we start
            if (endpoint.isSessionSupport()) {
                enableSessionSupport(connectorRef.server, connectorKey);
            }
            connectorRef.server.start();
            CONNECTORS.put(connectorKey, connectorRef);
            LOG.debug("Jetty Server started for host : " + connector.getHost() + ", on port : " + connector.getPort());
            server.start();
        } else {
            connectorRef.increment();
        }
        // check the session support
        if (endpoint.isSessionSupport()) {
            enableSessionSupport(connectorRef.server, connectorKey);
        }
    // TODO - As we can define WebSocket for Consumer/Producer
    // This part of the code must be adapted compare to camel-jetty where we only use
    // Jetty as a server = Consumer
    // connectorRef.servlet.connect(consumer);
    }
</td> </tr></table></body></html>