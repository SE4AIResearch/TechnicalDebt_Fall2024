<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>4409</td> <td>1242677873</td><td>GerritCodeReview/gerrit</td><td>Martin Fick</td><td>43f7940111973c589d3d8f4cee00d8c43dadd032</td> <td>None</td> <td>TODO Support more generic label assignments.</td> <td>SATD_ADDED</td> <td>checkLabels(RevisionResource, boolean, Map<String, Short>)</td> <td>private void checkLabels(RevisionResource revision, boolean strict, Map<String, Short> labels) throws BadRequestException, AuthException</td> <td>
    ChangeControl ctl = revision.getControl();
    Iterator<Map.Entry<String, Short>> itr = labels.entrySet().iterator();
    while (itr.hasNext()) {
        Map.Entry<String, Short> ent = itr.next();
        // TODO Support more generic label assignments.
        ApprovalType at = approvalTypes.byLabel(ent.getKey());
        if (at == null) {
            if (strict) {
                throw new BadRequestException(String.format("label \"%s\" is not a configured ApprovalCategory", ent.getKey()));
            } else {
                itr.remove();
                continue;
            }
        }
        if (ent.getValue() == null || ent.getValue() == 0) {
            // Always permit 0, even if it is not within range.
            // Later null/0 will be deleted and revoke the label.
            continue;
        }
        if (!at.getValuesAsList().contains(ent.getValue())) {
            if (strict) {
                throw new BadRequestException(String.format("label \"%s\": %d is not a valid value", ent.getKey(), ent.getValue()));
            } else {
                itr.remove();
                continue;
            }
        }
        String name = at.getCategory().getLabelName();
        PermissionRange range = ctl.getRange(Permission.forLabel(name));
        if (range == null || !range.contains(ent.getValue())) {
            if (strict) {
                throw new AuthException(String.format("Applying label \"%s\": %d is restricted", ent.getKey(), ent.getValue()));
            } else if (range == null || range.isEmpty()) {
                ent.setValue((short) 0);
            } else {
                ent.setValue((short) range.squash(ent.getValue()));
            }
        }
    }
</td> </tr></table></body></html>