<html> 
 <head> 
  <style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style> 
 </head> 
 <body> 
  <h1>SATD</h1> 
  <table> 
   <tbody> 
    <tr> 
     <th>satd id</th> 
     <th>satd instance id</th> 
     <th>project</th> 
     <th>committer name </th> 
     <th> Commit Hash</th> 
     <th>old comment</th> 
     <th>New Comment</th> 
     <th>resolution</th> 
     <th>Method Signature</th> 
     <th>Method Declaration</th> 
     <th>Method Body</th> 
    </tr> 
    <tr> 
     <td>4873</td> 
     <td>1242677881</td> 
     <td>GerritCodeReview/gerrit</td> 
     <td>Dave Borowitz</td> 
     <td>9d12abd177cea3ff708b6b762e1a5a6179a1942d</td> 
     <td>TODO Allow updating some labels even when closed.</td> 
     <td>TODO Allow updating some labels even when closed.</td> 
     <td>CLASS_OR_METHOD_CHANGED</td> 
     <td>updateLabels(ChangeContext)</td> 
     <td>private boolean updateLabels(ChangeContext ctx) throws OrmException</td> 
     <td> Map<string, short>
        labels = in.labels; if (labels == null) { labels = Collections.emptyMap(); } List 
       <patchsetapproval>
         del = Lists.newArrayList(); List 
        <patchsetapproval>
          ups = Lists.newArrayList(); Map 
         <string, patchsetapproval>
           current = scanLabels(ctx, del); ChangeUpdate update = ctx.getChangeUpdate(); LabelTypes labelTypes = ctx.getChangeControl().getLabelTypes(); for (Map.Entry 
          <string, short>
            ent : labels.entrySet()) { String name = ent.getKey(); LabelType lt = checkNotNull(labelTypes.byLabel(name), name); if (ctx.getChange().getStatus().isClosed()) { // TODO Allow updating some labels even when closed. continue; } PatchSetApproval c = current.remove(lt.getName()); String normName = lt.getName(); if (ent.getValue() == null || ent.getValue() == 0) { // User requested delete of this label. if (c != null) { if (c.getValue() != 0) { addLabelDelta(normName, (short) 0); } del.add(c); update.putApproval(ent.getKey(), (short) 0); } } else if (c != null &amp;&amp; c.getValue() != ent.getValue()) { c.setValue(ent.getValue()); c.setGranted(ctx.getWhen()); ups.add(c); addLabelDelta(normName, c.getValue()); categories.put(normName, c.getValue()); update.putApproval(ent.getKey(), ent.getValue()); } else if (c != null &amp;&amp; c.getValue() == ent.getValue()) { current.put(normName, c); } else if (c == null) { c = new PatchSetApproval(new PatchSetApproval.Key(psId, user.getAccountId(), lt.getLabelId()), ent.getValue(), TimeUtil.nowTs()); c.setGranted(ctx.getWhen()); ups.add(c); addLabelDelta(normName, c.getValue()); categories.put(normName, c.getValue()); update.putApproval(ent.getKey(), ent.getValue()); } } forceCallerAsReviewer(ctx, current, ups, del); ctx.getDb().patchSetApprovals().delete(del); ctx.getDb().patchSetApprovals().upsert(ups); return !del.isEmpty() || !ups.isEmpty(); 
          </string,> 
         </string,> 
        </patchsetapproval> 
       </patchsetapproval> 
      </string,></td> 
    </tr> 
   </tbody> 
   <tbody> 
    <tr> 
     <td>4626</td> 
     <td>1242677881</td> 
     <td>GerritCodeReview/gerrit</td> 
     <td>Dave Borowitz</td> 
     <td>d064abea4f107cdb4293ca0fccc02c5ee3fc4d0b</td> 
     <td>TODO Allow updating some labels even when closed.</td> 
     <td>TODO Allow updating some labels even when closed.</td> 
     <td>CLASS_OR_METHOD_CHANGED</td> 
     <td>updateLabels(RevisionResource, ChangeUpdate, Map<string, short>
        ) 
      </string,></td> 
     <td>private boolean updateLabels(RevisionResource rsrc, ChangeUpdate update, Map<string, short>
        labels) throws OrmException 
      </string,></td> 
     <td> if (labels == null) { labels = Collections.emptyMap(); } List<patchsetapproval>
        del = Lists.newArrayList(); List 
       <patchsetapproval>
         ins = Lists.newArrayList(); List 
        <patchsetapproval>
          upd = Lists.newArrayList(); Map 
         <string, patchsetapproval>
           current = scanLabels(rsrc, del); LabelTypes labelTypes = rsrc.getControl().getLabelTypes(); for (Map.Entry 
          <string, short>
            ent : labels.entrySet()) { String name = ent.getKey(); LabelType lt = checkNotNull(labelTypes.byLabel(name), name); if (change.getStatus().isClosed()) { // TODO Allow updating some labels even when closed. continue; } PatchSetApproval c = current.remove(name); String normName = lt.getName(); if (ent.getValue() == null || ent.getValue() == 0) { // User requested delete of this label. if (c != null) { if (c.getValue() != 0) { addLabelDelta(normName, (short) 0); } del.add(c); update.putApproval(ent.getKey(), (short) 0); } } else if (c != null &amp;&amp; c.getValue() != ent.getValue()) { c.setValue(ent.getValue()); c.setGranted(timestamp); upd.add(c); addLabelDelta(normName, c.getValue()); categories.put(normName, c.getValue()); update.putApproval(ent.getKey(), ent.getValue()); } else if (c != null &amp;&amp; c.getValue() == ent.getValue()) { current.put(normName, c); } else if (c == null) { c = new PatchSetApproval(new PatchSetApproval.Key(rsrc.getPatchSet().getId(), rsrc.getAccountId(), lt.getLabelId()), ent.getValue(), TimeUtil.nowTs()); c.setGranted(timestamp); ins.add(c); addLabelDelta(normName, c.getValue()); categories.put(normName, c.getValue()); update.putApproval(ent.getKey(), ent.getValue()); } } forceCallerAsReviewer(rsrc, current, ins, upd, del); db.get().patchSetApprovals().delete(del); db.get().patchSetApprovals().insert(ins); db.get().patchSetApprovals().update(upd); return !del.isEmpty() || !ins.isEmpty() || !upd.isEmpty(); 
          </string,> 
         </string,> 
        </patchsetapproval> 
       </patchsetapproval> 
      </patchsetapproval></td> 
    </tr> 
   </tbody> 
   <tbody>
    <tr>
     <td>4419</td> 
     <td>1242677881</td>
     <td>GerritCodeReview/gerrit</td>
     <td>Shawn O. Pearce</td>
     <td>327048b612815c1f5ec1aacd14b5da9383c2a815</td> 
     <td>TODO Allow updating some labels even when closed.</td> 
     <td>TODO Allow updating some labels even when closed.</td> 
     <td>CLASS_OR_METHOD_CHANGED</td> 
     <td>updateLabels(RevisionResource, Map<string, short>
       )
      </string,></td> 
     <td>private void updateLabels(RevisionResource rsrc, Map<string, short>
        labels) throws OrmException
      </string,></td> 
     <td> if (labels == null) { labels = Collections.emptyMap(); } List<patchsetapproval>
        del = Lists.newArrayList(); List
       <patchsetapproval>
         ins = Lists.newArrayList(); List
        <patchsetapproval>
          upd = Lists.newArrayList(); Map
         <string, patchsetapproval>
           current = scanLabels(rsrc, del); for (Map.Entry
          <string, short>
            ent : labels.entrySet()) { // TODO Support arbitrary label names. ApprovalType at = approvalTypes.byLabel(ent.getKey()); String name = at.getCategory().getLabelName(); if (change.getStatus().isClosed()) { // TODO Allow updating some labels even when closed. continue; } PatchSetApproval c = current.remove(name); if (ent.getValue() == null || ent.getValue() == 0) { // User requested delete of this label. if (c != null) { del.add(c); labelDelta.add("-" + name); } } else if (c != null &amp;&amp; c.getValue() != ent.getValue()) { c.setValue(ent.getValue()); c.setGranted(timestamp); c.cache(change); upd.add(c); labelDelta.add(format(name, c.getValue())); categories.put(at.getCategory().getId(), at.getValue(c.getValue()).getId()); } else if (c != null &amp;&amp; c.getValue() == ent.getValue()) { current.put(name, c); } else if (c == null) { c = new PatchSetApproval(new PatchSetApproval.Key(rsrc.getPatchSet().getId(), rsrc.getAuthorId(), at.getCategory().getId()), ent.getValue()); c.setGranted(timestamp); c.cache(change); ins.add(c); labelDelta.add(format(name, c.getValue())); categories.put(at.getCategory().getId(), at.getValue(c.getValue()).getId()); } } forceCallerAsReviewer(rsrc, current, ins, upd, del); db.patchSetApprovals().delete(del); db.patchSetApprovals().insert(ins); db.patchSetApprovals().update(upd); 
          </string,>
         </string,>
        </patchsetapproval>
       </patchsetapproval>
      </patchsetapproval></td> 
    </tr>
   </tbody>
  </table>  
 </body>
</html>