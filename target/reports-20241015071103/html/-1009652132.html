<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>5253</td> <td>-1009652132</td><td>apache/hadoop</td><td>Eli Collins</td><td>3fd40ae8d0b45d7bf6186fe14851ca87eb9ee3ef</td> <td>None</td> <td>TODO Multi-threading for speedup?</td> <td>SATD_ADDED</td> <td>emulate()</td> <td>public void emulate() throws IOException, InterruptedException</td> <td>
    if (enabled) {
        float currentProgress = progress.getProgress();
        if (lastSeenProgress < currentProgress && ((currentProgress - lastSeenProgress) >= emulationInterval || currentProgress == 1)) {
            // Estimate the final cpu usage
            // 
            // Consider the following
            // Cl/Cc/Cp : Last/Current/Projected Cpu usage
            // Pl/Pc/Pp : Last/Current/Projected progress
            // Then
            // (Cp-Cc)/(Pp-Pc) = (Cc-Cl)/(Pc-Pl)
            // Solving this for Cp, we get
            // Cp = Cc + (1-Pc)*(Cc-Cl)/Pc-Pl)
            // Note that (Cc-Cl)/(Pc-Pl) is termed as 'rate' in the following
            // section
            long currentCpuUsage = monitor.getProcResourceValues().getCumulativeCpuTime();
            // estimate the cpu usage rate
            float rate = (currentCpuUsage - lastSeenCpuUsageCpuUsage) / (currentProgress - lastSeenProgress);
            long projectedUsage = currentCpuUsage + (long) ((1 - currentProgress) * rate);
            if (projectedUsage < targetCpuUsage) {
                // determine the correction factor between the current usage and the
                // expected usage and add some weight to the target
                long currentWeighedTarget = (long) (targetCpuUsage * getWeightForProgressInterval(currentProgress));
                while (monitor.getProcResourceValues().getCumulativeCpuTime() < currentWeighedTarget) {
                    emulatorCore.compute();
                    // sleep for 100ms
                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException ie) {
                        String message = "CumulativeCpuUsageEmulatorPlugin got interrupted. Exiting.";
                        throw new RuntimeException(message);
                    }
                }
            }
            // set the last seen progress
            lastSeenProgress = progress.getProgress();
            // set the last seen usage
            lastSeenCpuUsageCpuUsage = monitor.getProcResourceValues().getCumulativeCpuTime();
        }
    }
</td> </tr></table></body></html>