<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>4879</td> <td>1242678106</td><td>GerritCodeReview/gerrit</td><td>David Pursehouse</td><td>39d1a499a74ce3586be1571e7bf9d5ac5269d5ef</td> <td>None</td> <td>1,2 is related directly to 4,1, and the 2-3 parallel branch stays intact.</td> <td>SATD_ADDED</td> <td>getRelatedReworkThenExtendInTheMiddleOfSeries()</td> <td>public void getRelatedReworkThenExtendInTheMiddleOfSeries() throws Exception</td> <td>
    // 1,1---2,1---3,1
    // 
    // 1,2---2,2---3,2
    // \---4,1
    // Create three commits and push.
    RevCommit c1_1 = commitBuilder().add("a.txt", "1").message("subject: 1").create();
    RevCommit c2_1 = commitBuilder().add("b.txt", "1").message("subject: 2").create();
    RevCommit c3_1 = commitBuilder().add("b.txt", "1").message("subject: 3").create();
    pushHead(testRepo, "refs/for/master", false);
    PatchSet.Id ps1_1 = getPatchSetId(c1_1);
    PatchSet.Id ps2_1 = getPatchSetId(c2_1);
    PatchSet.Id ps3_1 = getPatchSetId(c3_1);
    // Amend all changes change and push.
    testRepo.reset(c1_1);
    RevCommit c1_2 = amendBuilder().add("a.txt", "2").create();
    RevCommit c2_2 = commitBuilder().add("b.txt", "2").message(parseBody(c2_1).getFullMessage()).create();
    RevCommit c3_2 = commitBuilder().add("b.txt", "3").message(parseBody(c3_1).getFullMessage()).create();
    pushHead(testRepo, "refs/for/master", false);
    PatchSet.Id ps1_2 = getPatchSetId(c1_2);
    PatchSet.Id ps2_2 = getPatchSetId(c2_2);
    PatchSet.Id ps3_2 = getPatchSetId(c3_2);
    // Add one more commit 4,1 based on 1,2.
    testRepo.reset(c1_2);
    RevCommit c4_1 = commitBuilder().add("d.txt", "4").message("subject: 4").create();
    pushHead(testRepo, "refs/for/master", false);
    PatchSet.Id ps4_1 = getPatchSetId(c4_1);
    // 1,1 is related indirectly to 4,1.
    assertRelated(ps1_1, changeAndCommit(ps4_1, c4_1, 1), changeAndCommit(ps3_1, c3_1, 2), changeAndCommit(ps2_1, c2_1, 2), changeAndCommit(ps1_1, c1_1, 2));
    // 2,1 and 3,1 don't include 4,1 since we don't walk forward after walking
    // backward.
    for (PatchSet.Id ps : ImmutableList.of(ps2_1, ps3_1)) {
        assertRelated(ps, changeAndCommit(ps3_1, c3_1, 2), changeAndCommit(ps2_1, c2_1, 2), changeAndCommit(ps1_1, c1_1, 2));
    }
    // 1,2 is related directly to 4,1, and the 2-3 parallel branch stays intact.
    assertRelated(ps1_2, changeAndCommit(ps3_2, c3_2, 2), changeAndCommit(ps4_1, c4_1, 1), changeAndCommit(ps2_2, c2_2, 2), changeAndCommit(ps1_2, c1_2, 2));
    // 4,1 is only related to 1,2, since we don't walk forward after walking
    // backward.
    assertRelated(ps4_1, changeAndCommit(ps4_1, c4_1, 1), changeAndCommit(ps1_2, c1_2, 2));
    // 2,2 and 3,2 don't include 4,1 since we don't walk forward after walking
    // backward.
    for (PatchSet.Id ps : ImmutableList.of(ps2_2, ps3_2)) {
        assertRelated(ps, changeAndCommit(ps3_2, c3_2, 2), changeAndCommit(ps2_2, c2_2, 2), changeAndCommit(ps1_2, c1_2, 2));
    }
</td> </tr></table></body></html>