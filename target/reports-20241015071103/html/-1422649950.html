<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>3870</td> <td>-1422649950</td><td>apache/camel</td><td>Claus Ibsen</td><td>45bd634f7e0db844b667480e657b103d7264d5e6</td> <td>None</td> <td>this channel is maybe closing graceful and the exchange is already done
and if so we should not trigger an exception</td> <td>SATD_ADDED</td> <td>channelClosed(ChannelHandlerContext, ChannelStateEvent)</td> <td>public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) throws Exception</td> <td>
    if (LOG.isTraceEnabled()) {
        LOG.trace("Channel closed: {}", ctx.getChannel());
    }
    Exchange exchange = getExchange(ctx);
    AsyncCallback callback = getAsyncCallback(ctx);
    // remove state
    producer.removeState(ctx.getChannel());
    // to keep track of open sockets
    producer.getAllChannels().remove(ctx.getChannel());
    // this channel is maybe closing graceful and the exchange is already done
    // and if so we should not trigger an exception
    boolean doneUoW = exchange.getUnitOfWork() == null;
    if (producer.getConfiguration().isSync() && !doneUoW && !messageReceived && !exceptionHandled) {
        // To avoid call the callback.done twice
        exceptionHandled = true;
        // session was closed but no message received. This could be because the remote server had an internal error
        // and could not return a response. We should count down to stop waiting for a response
        if (LOG.isDebugEnabled()) {
            LOG.debug("Channel closed but no message received from address: {}", producer.getConfiguration().getAddress());
        }
        exchange.setException(new CamelExchangeException("No response received from remote server: " + producer.getConfiguration().getAddress(), exchange));
        // signal callback
        callback.done(false);
    }
    // make sure the event can be processed by other handlers
    super.channelClosed(ctx, e);
</td> </tr></table></body></html>