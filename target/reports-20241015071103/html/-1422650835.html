<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>2295</td> <td>-1422650835</td><td>apache/camel</td><td>Claus Ibsen</td><td>4bb5740096a346cf8d970578c4febb60716fd9f6</td> <td>None</td> <td>must extract the absolute name before the begin strategy as the file could potentially be pre moved
and then the file name would be changed</td> <td>SATD_ADDED</td> <td>processExchange(Exchange)</td> <td>protected void processExchange(final Exchange exchange)</td> <td>
    GenericFile<T> file = getExchangeFileProperty(exchange);
    log.trace("Processing file: {}", file);
    // must extract the absolute name before the begin strategy as the file could potentially be pre moved
    // and then the file name would be changed
    String absoluteFileName = file.getAbsoluteFilePath();
    // check if we can begin processing the file
    try {
        final GenericFileProcessStrategy<T> processStrategy = endpoint.getGenericFileProcessStrategy();
        boolean begin = processStrategy.begin(operations, endpoint, exchange, file);
        if (!begin) {
            log.debug(endpoint + " cannot begin processing file: {}", file);
            // begin returned false, so remove file from the in progress list as its no longer in progress
            endpoint.getInProgressRepository().remove(absoluteFileName);
            return;
        }
    } catch (Exception e) {
        if (log.isDebugEnabled()) {
            log.debug(endpoint + " cannot begin processing file: " + file + " due to: " + e.getMessage(), e);
        }
        endpoint.getInProgressRepository().remove(absoluteFileName);
        return;
    }
    // must use file from exchange as it can be updated due the
    // preMoveNamePrefix/preMoveNamePostfix options
    final GenericFile<T> target = getExchangeFileProperty(exchange);
    // must use full name when downloading so we have the correct path
    final String name = target.getAbsoluteFilePath();
    try {
        // retrieve the file using the stream
        log.trace("Retrieving file: {} from: {}", name, endpoint);
        // retrieve the file and check it was a success
        boolean retrieved = operations.retrieveFile(name, exchange);
        if (!retrieved) {
            // throw exception to handle the problem with retrieving the file
            // then if the method return false or throws an exception is handled the same in here
            // as in both cases an exception is being thrown
            throw new GenericFileOperationFailedException("Cannot retrieve file: " + file + " from: " + endpoint);
        }
        log.trace("Retrieved file: {} from: {}", name, endpoint);
        // register on completion callback that does the completion strategies
        // (for instance to move the file after we have processed it)
        exchange.addOnCompletion(new GenericFileOnCompletion<T>(endpoint, operations, target, absoluteFileName));
        log.debug("About to process file: {} using exchange: {}", target, exchange);
        // process the exchange using the async consumer to support async routing engine
        // which can be supported by this file consumer as all the done work is
        // provided in the GenericFileOnCompletion
        getAsyncProcessor().process(exchange, new AsyncCallback() {

            public void done(boolean doneSync) {
                // noop
                if (log.isTraceEnabled()) {
                    log.trace("Done processing file: {} {}", target, doneSync ? "synchronously" : "asynchronously");
                }
            }
        });
    } catch (Exception e) {
        // remove file from the in progress list due to failure
        // (cannot be in finally block due to GenericFileOnCompletion will remove it
        // from in progress when it takes over and processes the file, which may happen
        // by another thread at a later time. So its only safe to remove it if there was an exception)
        endpoint.getInProgressRepository().remove(absoluteFileName);
        handleException(e);
    }
</td> </tr></table></body></html>