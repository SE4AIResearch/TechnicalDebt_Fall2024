<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>1570</td> <td>-1422651243</td><td>apache/camel</td><td>Claus Ibsen</td><td>b5021c4dde7cef1d426dc1823e73d9f9eb4906c6</td> <td>None</td> <td>now we use our own expressions to split the file as we like it
what we return is just the list of the two Camel Message objects
which contains the splitted data (our way)</td> <td>SATD_ADDED</td> <td>evaluate(Exchange, Class<T>)</td> <td>public T evaluate(Exchange exchange, Class<T> type)</td> <td>
    // must copy from the original exchange as Camel holds information about the file in progress
    Message msg1 = exchange.getIn().copy();
    Message msg2 = exchange.getIn().copy();
    // now we use our own expressions to split the file as we like it
    // what we return is just the list of the two Camel Message objects
    // which contains the splitted data (our way)
    List<Message> answer = new ArrayList<Message>();
    answer.add(msg1);
    answer.add(msg2);
    // split the original body into two data lists
    // can be done a bit prettier than this code
    // but its just for show and tell how to use Expressions
    List<String> data1 = new ArrayList<String>();
    List<String> data2 = new ArrayList<String>();
    String body = exchange.getIn().getBody(String.class);
    String[] lines = body.split("\n");
    for (String line : lines) {
        if (line.startsWith("foo")) {
            data1.add(line);
        } else {
            data2.add(line);
        }
    }
    // as we use the recipeientList afterwards we set the destination
    // as well on our message where we want to route it
    // as we are an unit test then just store the list using toString so its easier to test
    msg1.setBody(data1.toString());
    msg1.setHeader("myCustomDestination", "mock:foo");
    msg2.setBody(data2.toString());
    msg2.setHeader("myCustomDestination", "mock:bar");
    // just cast it to T as its safe as its Object anyway for custom expressions
    return (T) answer;
</td> </tr></table></body></html>