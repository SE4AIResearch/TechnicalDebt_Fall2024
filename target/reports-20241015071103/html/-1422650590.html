<html>
 <head> 
  <style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style> 
 </head> 
 <body>
  <h1>SATD</h1>
  <table>
   <tbody>
    <tr>
     <th>satd id</th> 
     <th>satd instance id</th> 
     <th>project</th> 
     <th>committer name </th> 
     <th> Commit Hash</th> 
     <th>old comment</th> 
     <th>New Comment</th> 
     <th>resolution</th> 
     <th>Method Signature</th> 
     <th>Method Declaration</th> 
     <th>Method Body</th> 
    </tr>
    <tr>
     <td>2984</td> 
     <td>-1422650590</td>
     <td>apache/camel</td>
     <td>Claus Ibsen</td>
     <td>b4ac8ceed6195589917e2c2fde4e485a5e7c04ac</td> 
     <td>in this logic we need to calculate the accumulated processing time for the processor in the route and hence why the logic is a bit more complicated to do this, as we need to caculate that from the bottom -&gt; top of the route but this information is valuable for profiling routes</td> 
     <td>in this logic we need to calculate the accumulated processing time for the processor in the route and hence why the logic is a bit more complicated to do this, as we need to calculate that from the bottom -&gt; top of the route but this information is valuable for profiling routes</td> 
     <td>SATD_CHANGED</td> 
     <td>dumpRouteStatsAsXml(boolean, boolean)</td> 
     <td>public String dumpRouteStatsAsXml(boolean fullStats, boolean includeProcessors) throws Exception</td> 
     <td> // in this logic we need to calculate the accumulated processing time for the processor in the route // and hence why the logic is a bit more complicated to do this, as we need to calculate that from // the bottom -&gt; top of the route but this information is valuable for profiling routes StringBuilder sb = new StringBuilder(); // need to calculate this value first, as we need that value for the route stat Long processorAccumulatedTime = 0L; // gather all the processors for this route, which requires JMX if (includeProcessors) { sb.append(" <processorstats>
       \n"); MBeanServer server = getContext().getManagementStrategy().getManagementAgent().getMBeanServer(); if (server != null) { // get all the processor mbeans and sort them accordingly to their index String prefix = getContext().getManagementStrategy().getManagementAgent().getIncludeHostName() ? "*/" : ""; ObjectName query = ObjectName.getInstance("org.apache.camel:context=" + prefix + getContext().getManagementName() + ",type=processors,*"); Set
       <objectname>
         names = server.queryNames(query, null); List
        <managedprocessormbean>
          mps = new ArrayList
         <managedprocessormbean>
          (); for (ObjectName on : names) { ManagedProcessorMBean processor = MBeanServerInvocationHandler.newProxyInstance(server, on, ManagedProcessorMBean.class, true); // the processor must belong to this route if (getRouteId().equals(processor.getRouteId())) { mps.add(processor); } } Collections.sort(mps, new OrderProcessorMBeans()); // walk the processors in reverse order, and calculate the accumulated total time Map
          <string, long>
            accumulatedTimes = new HashMap
           <string, long>
            (); Collections.reverse(mps); for (ManagedProcessorMBean processor : mps) { processorAccumulatedTime += processor.getTotalProcessingTime(); accumulatedTimes.put(processor.getProcessorId(), processorAccumulatedTime); } // and reverse back again Collections.reverse(mps); // and now add the sorted list of processors to the xml output for (ManagedProcessorMBean processor : mps) { sb.append(" 
            <processorstat").append(string.format(" id="\&quot;%s\&quot;" index="\&quot;%s\&quot;&quot;," processor.getprocessorid(), processor.getindex())); do we have an accumulated time then append that long acctime="accumulatedTimes.get(processor.getProcessorId());" if (acctime !="null)" { sb.append(" accumulatedprocessingtime="\&quot;&quot;).append(accTime).append(&quot;\&quot;&quot;);" } use substring as only want the attributes ").append(processor.dumpstatsasxml(fullstats).substring(7)).append("\n"); < processorstats>
             \n"); } // route self time is route total - processor accumulated total) long routeSelfTime = getTotalProcessingTime() - processorAccumulatedTime; if (routeSelfTime &lt; 0) { // ensure we don't calculate that as negative routeSelfTime = 0; } StringBuilder answer = new StringBuilder(); answer.append("
             <routestat").append(string.format(" id="\&quot;%s\&quot;&quot;," route.getid())); use substring as we only want the attributes string stat="dumpStatsAsXml(fullStats);" answer.append(" selfprocessingtime="\&quot;&quot;).append(routeSelfTime).append(&quot;\&quot;&quot;);" ").append(stat.substring(7, stat.length() - 2)).append(">
              \n"); if (includeProcessors) { answer.append(sb); } answer.append(""); return answer.toString(); 
             </routestat").append(string.format(">
            </processorstat").append(string.format(">
           </string,>
          </string,>
         </managedprocessormbean>
        </managedprocessormbean>
       </objectname>
      </processorstats></td> 
    </tr>
   </tbody>
   <tbody>
    <tr>
     <td>2723</td> 
     <td>-1422650590</td>
     <td>apache/camel</td>
     <td>Claus Ibsen</td>
     <td>0969ee52ed690c04e87b0fb2699cb613475c117e</td> 
     <td>None</td> 
     <td>in this logic we need to calculate the accumulated processing time for the processor in the route and hence why the logic is a bit more complicated to do this, as we need to caculate that from the bottom -&gt; top of the route but this information is valuable for profiling routes</td> 
     <td>SATD_ADDED</td> 
     <td>dumpRouteStatsAsXml(boolean, boolean)</td> 
     <td>public String dumpRouteStatsAsXml(boolean fullStats, boolean includeProcessors) throws Exception</td> 
     <td> // in this logic we need to calculate the accumulated processing time for the processor in the route // and hence why the logic is a bit more complicated to do this, as we need to caculate that from // the bottom -&gt; top of the route but this information is valuable for profiling routes StringBuilder sb = new StringBuilder(); // need to calculate this value first, as we need that value for the route stat Long processorAccumulatedTime = 0L; // gather all the processors for this route, which requires JMX if (includeProcessors) { sb.append(" <processorstats>
       \n"); MBeanServer server = getContext().getManagementStrategy().getManagementAgent().getMBeanServer(); if (server != null) { // get all the processor mbeans and sort them accordingly to their index ObjectName query = ObjectName.getInstance("org.apache.camel:context=*/" + getContext().getManagementName() + ",type=processors,*"); Set
       <objectname>
         names = server.queryNames(query, null); List
        <managedprocessormbean>
          mps = new ArrayList
         <managedprocessormbean>
          (); for (ObjectName on : names) { ManagedProcessorMBean processor = MBeanServerInvocationHandler.newProxyInstance(server, on, ManagedProcessorMBean.class, true); // the processor must belong to this route if (getRouteId().equals(processor.getRouteId())) { mps.add(processor); } } Collections.sort(mps, new OrderProcessorMBeans()); // walk the processors in reverse order, and calculate the accumulated total time Map
          <string, long>
            accumulatedTimes = new HashMap
           <string, long>
            (); Collections.reverse(mps); for (ManagedProcessorMBean processor : mps) { processorAccumulatedTime += processor.getTotalProcessingTime(); accumulatedTimes.put(processor.getProcessorId(), processorAccumulatedTime); } // and reverse back again Collections.reverse(mps); // and now add the sorted list of processors to the xml output for (ManagedProcessorMBean processor : mps) { sb.append(" 
            <processorstat").append(string.format(" id="\&quot;%s\&quot;" index="\&quot;%s\&quot;&quot;," processor.getprocessorid(), processor.getindex())); do we have an accumulated time then append that long acctime="accumulatedTimes.get(processor.getProcessorId());" if (acctime !="null)" { sb.append(" accumulatedprocessingtime="\&quot;&quot;).append(accTime).append(&quot;\&quot;&quot;);" } use substring as only want the attributes ").append(processor.dumpstatsasxml(fullstats).substring(7)).append("\n"); < processorstats>
             \n"); } // route self time is route total - processor accumulated total) long routeSelfTime = getTotalProcessingTime() - processorAccumulatedTime; if (routeSelfTime &lt; 0) { // ensure we don't calculate that as negative routeSelfTime = 0; } StringBuilder answer = new StringBuilder(); answer.append("
             <routestat").append(string.format(" id="\&quot;%s\&quot;&quot;," route.getid())); use substring as we only want the attributes string stat="dumpStatsAsXml(fullStats);" answer.append(" selfprocessingtime="\&quot;&quot;).append(routeSelfTime).append(&quot;\&quot;&quot;);" ").append(stat.substring(7, stat.length() - 2)).append(">
              \n"); if (includeProcessors) { answer.append(sb); } answer.append(""); return answer.toString(); 
             </routestat").append(string.format(">
            </processorstat").append(string.format(">
           </string,>
          </string,>
         </managedprocessormbean>
        </managedprocessormbean>
       </objectname>
      </processorstats></td> 
    </tr>
   </tbody>
  </table>
 </body>
</html>