<html><head>
<style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style>
</head> <body><h1>SATD</h1><table><tr><th>satd id</th> <th>satd instance id</th>  <th>project</th> <th>committer name </th> <th> Commit Hash</th> <th>old comment</th> <th>New Comment</th> <th>resolution</th> <th>Method Signature</th> <th>Method Declaration</th> <th>Method Body</th> </tr><tr><td>2726</td> <td>-1422650587</td><td>apache/camel</td><td>Christian Mueller</td><td>e0e834619f9c46861c709ea5ac37e16b524109dd</td> <td>None</td> <td>TODO would be nice here to create a default endpoint/consumer object
and return the default value of the field so we can put it into the docs</td> <td>SATD_ADDED</td> <td>findClassProperties(RoundEnvironment, SortedMap<String, List<String>>, TypeElement, String)</td> <td>protected void findClassProperties(RoundEnvironment roundEnv, SortedMap<String, List<String>> sortedMap, TypeElement classElement, String prefix)</td> <td>
    Elements elementUtils = processingEnv.getElementUtils();
    while (true) {
        List<VariableElement> fieldElements = ElementFilter.fieldsIn(classElement.getEnclosedElements());
        if (fieldElements.isEmpty()) {
            break;
        }
        for (VariableElement fieldElement : fieldElements) {
            UriParam param = fieldElement.getAnnotation(UriParam.class);
            String fieldName = fieldElement.getSimpleName().toString();
            if (param != null) {
                String name = param.name();
                if (Strings.isNullOrEmpty(name)) {
                    name = fieldName;
                }
                name = prefix + name;
                // if the field type is a nested parameter then iterate through its fields
                TypeMirror fieldType = fieldElement.asType();
                String fieldTypeName = fieldType.toString();
                TypeElement fieldTypeElement = findTypeElement(roundEnv, fieldTypeName);
                UriParams fieldParams = null;
                if (fieldTypeElement != null) {
                    fieldParams = fieldTypeElement.getAnnotation(UriParams.class);
                }
                if (fieldParams != null) {
                    String nestedPrefix = prefix;
                    String extraPrefix = fieldParams.prefix();
                    if (!Strings.isNullOrEmpty(extraPrefix)) {
                        nestedPrefix += extraPrefix;
                    }
                    findClassProperties(roundEnv, sortedMap, fieldTypeElement, nestedPrefix);
                } else {
                    String docComment = elementUtils.getDocComment(fieldElement);
                    if (Strings.isNullOrEmpty(docComment)) {
                        String setter = "set" + fieldName.substring(0, 1).toUpperCase();
                        if (fieldName.length() > 1) {
                            setter += fieldName.substring(1);
                        }
                        // lets find the setter
                        List<ExecutableElement> methods = ElementFilter.methodsIn(classElement.getEnclosedElements());
                        for (ExecutableElement method : methods) {
                            String methodName = method.getSimpleName().toString();
                            if (setter.equals(methodName) && method.getParameters().size() == 1) {
                                String doc = elementUtils.getDocComment(method);
                                if (!Strings.isNullOrEmpty(doc)) {
                                    docComment = doc;
                                    break;
                                }
                            }
                        }
                    }
                    if (docComment == null) {
                        docComment = "";
                    }
                    List<String> values = new ArrayList<String>();
                    values.add("    <td>" + fieldTypeName + "</td>");
                    values.add("    <td>" + docComment.trim() + "</td>");
                    // TODO would be nice here to create a default endpoint/consumer object
                    // and return the default value of the field so we can put it into the docs
                    Object defaultValue = null;
                    if (defaultValue != null) {
                        values.add("    <td>" + defaultValue + "</td>");
                    }
                    if (sortedMap.containsKey(name)) {
                        error("Duplicate parameter annotation named '" + name + "' on class " + classElement.getQualifiedName());
                    } else {
                        sortedMap.put(name, values);
                    }
                }
            }
        }
        TypeElement baseTypeElement = null;
        TypeMirror superclass = classElement.getSuperclass();
        if (superclass != null) {
            baseTypeElement = findTypeElement(roundEnv, superclass.toString());
        }
        if (baseTypeElement != null) {
            classElement = baseTypeElement;
        } else {
            break;
        }
    }
</td> </tr></table></body></html>