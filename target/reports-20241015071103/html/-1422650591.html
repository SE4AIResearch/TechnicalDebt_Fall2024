<html> 
 <head> 
  <style> table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}th {
  background: lightblue;
}</style> 
 </head> 
 <body> 
  <h1>SATD</h1> 
  <table> 
   <tbody> 
    <tr> 
     <th>satd id</th> 
     <th>satd instance id</th> 
     <th>project</th> 
     <th>committer name </th> 
     <th> Commit Hash</th> 
     <th>old comment</th> 
     <th>New Comment</th> 
     <th>resolution</th> 
     <th>Method Signature</th> 
     <th>Method Declaration</th> 
     <th>Method Body</th> 
    </tr> 
    <tr> 
     <td>2721</td> 
     <td>-1422650591</td> 
     <td>apache/camel</td> 
     <td>Claus Ibsen</td> 
     <td>8a426142e6de8bd7f43c701bcc4162b000fead2e</td> 
     <td>TODO: add column with total time (delta for self time)</td> 
     <td>TODO: add column with total time (delta for self time)</td> 
     <td>CLASS_OR_METHOD_CHANGED</td> 
     <td>executeOnRoute(CamelContext, Route)</td> 
     <td>public void executeOnRoute(CamelContext camelContext, Route camelRoute) throws Exception</td> 
     <td> JAXBContext context = JAXBContext.newInstance(RouteStatDump.class); Unmarshaller unmarshaller = context.createUnmarshaller(); // write new header for new camel context if (previousCamelContextName == null || !previousCamelContextName.equals(camelContext.getName())) { System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1mProfile\u001B[0m")); System.out.println(StringEscapeUtils.unescapeJava("\tCamel Context: " + camelRoute.getRouteContext().getCamelContext().getName())); System.out.println(String.format(HEADER_FORMAT, "Id", "Count", "Last (ms)", "Delta (ms)", "Mean (ms)", "Min (ms)", "Max (ms)", "Self (ms)")); } // System.out.println(StringEscapeUtils.unescapeJava("\u001B[1m\u001B[33mCamel Route " + camelRoute.getId() + "\u001B[0m")); // System.out.println(StringEscapeUtils.unescapeJava("\tEndpoint uri: " + URISupport.sanitizeUri(camelRoute.getEndpoint().getEndpointUri()))); ManagementAgent agent = camelContext.getManagementStrategy().getManagementAgent(); if (agent != null) { MBeanServer mBeanServer = agent.getMBeanServer(); Set<objectname>
        set = mBeanServer.queryNames(new ObjectName(DefaultManagementAgent.DEFAULT_DOMAIN + ":type=routes,name=\"" + camelRoute.getId() + "\",*"), null); for (ObjectName routeMBean : set) { // the route must be part of the camel context String camelId = (String) mBeanServer.getAttribute(routeMBean, "CamelId"); if (camelId != null &amp;&amp; camelId.equals(camelContext.getName())) { // TODO: add column with total time (delta for self time) String xml = (String) mBeanServer.invoke(routeMBean, "dumpRouteStatsAsXml", new Object[] { Boolean.FALSE, Boolean.TRUE }, new String[] { "boolean", "boolean" }); RouteStatDump route = (RouteStatDump) unmarshaller.unmarshal(new StringReader(xml)); long count = route.getExchangesCompleted() + route.getExchangesFailed(); System.out.println(String.format(OUTPUT_FORMAT, route.getId(), count, route.getLastProcessingTime(), route.getDeltaProcessingTime(), route.getMeanProcessingTime(), route.getMinProcessingTime(), route.getMaxProcessingTime(), "")); for (ProcessorStatDump ps : route.getProcessorStats()) { // the self time is the total time of the processor itself String selfTime = "" + ps.getTotalProcessingTime(); count = ps.getExchangesCompleted() + ps.getExchangesFailed(); // indent route id with 2 spaces System.out.println(String.format(OUTPUT_FORMAT, " " + ps.getId(), count, ps.getLastProcessingTime(), ps.getDeltaProcessingTime(), ps.getMeanProcessingTime(), ps.getMinProcessingTime(), ps.getMaxProcessingTime(), selfTime)); } } } } else { System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[31mJMX Agent of Camel is not reachable. Maybe it has been disabled on the Camel context")); System.out.println(StringEscapeUtils.unescapeJava("In consequence, profile are not available.\u001B[0m")); } // we want to group routes from the same context in the same table previousCamelContextName = camelContext.getName(); 
      </objectname></td> 
    </tr> 
   </tbody> 
   <tbody> 
    <tr> 
     <td>2720</td> 
     <td>-1422650591</td> 
     <td>apache/camel</td> 
     <td>Claus Ibsen</td> 
     <td>2c48aa474405c79dfcdce27bded5d91577479109</td> 
     <td>TODO: add a row with the route endpoint, so you can see that TODO: add column with total time (delta for self time)</td> 
     <td>TODO: add column with total time (delta for self time)</td> 
     <td>SATD_CHANGED</td> 
     <td>doExecute()</td> 
     <td>public Object doExecute() throws Exception</td> 
     <td> Route camelRoute = camelController.getRoute(route, context); if (camelRoute == null) { System.err.println("Camel route " + route + " not found."); return null; } JAXBContext context = JAXBContext.newInstance(RouteStatDump.class); Unmarshaller unmarshaller = context.createUnmarshaller(); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1m\u001B[33mCamel Route " + camelRoute.getId() + "\u001B[0m")); System.out.println(StringEscapeUtils.unescapeJava("\tEndpoint uri: " + URISupport.sanitizeUri(camelRoute.getEndpoint().getEndpointUri()))); System.out.println(StringEscapeUtils.unescapeJava("\tCamel Context: " + camelRoute.getRouteContext().getCamelContext().getName())); System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1mProfile\u001B[0m")); CamelContext camelContext = camelRoute.getRouteContext().getCamelContext(); if (camelContext != null) { ManagementAgent agent = camelContext.getManagementStrategy().getManagementAgent(); if (agent != null) { MBeanServer mBeanServer = agent.getMBeanServer(); Set<objectname>
        set = mBeanServer.queryNames(new ObjectName(DefaultManagementAgent.DEFAULT_DOMAIN + ":type=routes,name=\"" + route + "\",*"), null); Iterator 
       <objectname>
         iterator = set.iterator(); if (iterator.hasNext()) { ObjectName routeMBean = iterator.next(); // TODO: add column with total time (delta for self time) String xml = (String) mBeanServer.invoke(routeMBean, "dumpRouteStatsAsXml", new Object[] { Boolean.FALSE, Boolean.TRUE }, new String[] { "boolean", "boolean" }); RouteStatDump route = (RouteStatDump) unmarshaller.unmarshal(new StringReader(xml)); System.out.println(String.format(HEADER_FORMAT, "Id", "Completed", "Failed", "Last (ms)", "Delta (ms)", "Mean (ms)", "Min (ms)", "Max (ms)", "Self (ms)")); System.out.println(String.format(OUTPUT_FORMAT, route.getId(), route.getExchangesCompleted(), route.getExchangesFailed(), route.getLastProcessingTime(), route.getDeltaProcessingTime(), route.getMeanProcessingTime(), route.getMinProcessingTime(), route.getMaxProcessingTime(), route.getTotalProcessingTime(), 0)); // output in reverse order which prints the route as we want for (ProcessorStatDump ps : route.getProcessorStats()) { // the self time is the total time of the processor itself long selfTime = ps.getTotalProcessingTime(); // indent route id with 2 spaces System.out.println(String.format(OUTPUT_FORMAT, " " + ps.getId(), ps.getExchangesCompleted(), ps.getExchangesFailed(), ps.getLastProcessingTime(), ps.getDeltaProcessingTime(), ps.getMeanProcessingTime(), ps.getMinProcessingTime(), ps.getMaxProcessingTime(), selfTime)); } } } else { System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[31mJMX Agent of Camel is not reachable. Maybe it has been disabled on the Camel context")); System.out.println(StringEscapeUtils.unescapeJava("In consequence, profile are not available.\u001B[0m")); } } return null; 
       </objectname> 
      </objectname></td> 
    </tr> 
   </tbody> 
   <tbody> 
    <tr> 
     <td>2719</td> 
     <td>-1422650591</td> 
     <td>apache/camel</td> 
     <td>Claus Ibsen</td> 
     <td>8cf3b61167ef47631f51e983b0faeddda808edea</td> 
     <td>TODO: add a row with the route endpoint, so you can see that TODO: add column with total time (delta for self time) TODO: ensure the jmx mbeans for processors is sorted correctly</td> 
     <td>TODO: add a row with the route endpoint, so you can see that TODO: add column with total time (delta for self time)</td> 
     <td>SATD_CHANGED</td> 
     <td>doExecute()</td> 
     <td>public Object doExecute() throws Exception</td> 
     <td> Route camelRoute = camelController.getRoute(route, context); if (camelRoute == null) { System.err.println("Camel route " + route + " not found."); return null; } JAXBContext context = JAXBContext.newInstance(RouteStatDump.class); Unmarshaller unmarshaller = context.createUnmarshaller(); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1m\u001B[33mCamel Route " + camelRoute.getId() + "\u001B[0m")); System.out.println(StringEscapeUtils.unescapeJava("\tCamel Context: " + camelRoute.getRouteContext().getCamelContext().getName())); System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1mProfile\u001B[0m")); CamelContext camelContext = camelRoute.getRouteContext().getCamelContext(); if (camelContext != null) { ManagementAgent agent = camelContext.getManagementStrategy().getManagementAgent(); if (agent != null) { MBeanServer mBeanServer = agent.getMBeanServer(); Set<objectname>
        set = mBeanServer.queryNames(new ObjectName(DefaultManagementAgent.DEFAULT_DOMAIN + ":type=routes,name=\"" + route + "\",*"), null); Iterator 
       <objectname>
         iterator = set.iterator(); if (iterator.hasNext()) { ObjectName routeMBean = iterator.next(); // TODO: add a row with the route endpoint, so you can see that // TODO: add column with total time (delta for self time) String xml = (String) mBeanServer.invoke(routeMBean, "dumpRouteStatsAsXml", new Object[] { Boolean.FALSE, Boolean.TRUE }, new String[] { "boolean", "boolean" }); RouteStatDump route = (RouteStatDump) unmarshaller.unmarshal(new StringReader(xml)); System.out.println(String.format(HEADER_FORMAT, "Id", "Completed", "Failed", "Last (ms)", "Mean (ms)", "Min (ms)", "Max (ms)", "Self (ms)")); System.out.println(String.format(OUTPUT_FORMAT, route.getId(), route.getExchangesCompleted(), route.getExchangesFailed(), route.getLastProcessingTime(), route.getMeanProcessingTime(), route.getMinProcessingTime(), route.getMaxProcessingTime(), route.getTotalProcessingTime(), 0)); // output in reverse order which prints the route as we want for (ProcessorStatDump ps : route.getProcessorStats()) { // the self time is the total time of the processor itself long selfTime = ps.getTotalProcessingTime(); // indent route id with 2 spaces System.out.println(String.format(OUTPUT_FORMAT, " " + ps.getId(), ps.getExchangesCompleted(), ps.getExchangesFailed(), ps.getLastProcessingTime(), ps.getMeanProcessingTime(), ps.getMinProcessingTime(), ps.getMaxProcessingTime(), selfTime)); } } } else { System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[31mJMX Agent of Camel is not reachable. Maybe it has been disabled on the Camel context")); System.out.println(StringEscapeUtils.unescapeJava("In consequence, profile are not available.\u001B[0m")); } } return null; 
       </objectname> 
      </objectname></td> 
    </tr> 
   </tbody> 
   <tbody>
    <tr>
     <td>2718</td> 
     <td>-1422650591</td>
     <td>apache/camel</td>
     <td>Claus Ibsen</td>
     <td>a5b6bbdc1c4be3cafbc5eb012b81f909baa2fe17</td> 
     <td>None</td> 
     <td>TODO: add a row with the route endpoint, so you can see that TODO: add column with total time (delta for self time) TODO: ensure the jmx mbeans for processors is sorted correctly</td> 
     <td>SATD_ADDED</td> 
     <td>doExecute()</td> 
     <td>public Object doExecute() throws Exception</td> 
     <td> Route camelRoute = camelController.getRoute(route, context); if (camelRoute == null) { System.err.println("Camel route " + route + " not found."); return null; } JAXBContext context = JAXBContext.newInstance(RouteStatDump.class); Unmarshaller unmarshaller = context.createUnmarshaller(); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1m\u001B[33mCamel Route " + camelRoute.getId() + "\u001B[0m")); System.out.println(StringEscapeUtils.unescapeJava("\tCamel Context: " + camelRoute.getRouteContext().getCamelContext().getName())); System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[1mProfile\u001B[0m")); CamelContext camelContext = camelRoute.getRouteContext().getCamelContext(); if (camelContext != null) { ManagementAgent agent = camelContext.getManagementStrategy().getManagementAgent(); if (agent != null) { MBeanServer mBeanServer = agent.getMBeanServer(); Set<objectname>
        set = mBeanServer.queryNames(new ObjectName(DefaultManagementAgent.DEFAULT_DOMAIN + ":type=routes,name=\"" + route + "\",*"), null); Iterator
       <objectname>
         iterator = set.iterator(); if (iterator.hasNext()) { ObjectName routeMBean = iterator.next(); // TODO: add a row with the route endpoint, so you can see that // TODO: add column with total time (delta for self time) // TODO: ensure the jmx mbeans for processors is sorted correctly String xml = (String) mBeanServer.invoke(routeMBean, "dumpRouteStatsAsXml", new Object[] { Boolean.FALSE, Boolean.TRUE }, new String[] { "boolean", "boolean" }); RouteStatDump route = (RouteStatDump) unmarshaller.unmarshal(new StringReader(xml)); System.out.println(String.format(HEADER_FORMAT, "Id", "Completed", "Failed", "Last (ms)", "Mean (ms)", "Min (ms)", "Max (ms)", "Self (ms)")); System.out.println(String.format(OUTPUT_FORMAT, route.getId(), route.getExchangesCompleted(), route.getExchangesFailed(), route.getLastProcessingTime(), route.getMeanProcessingTime(), route.getMinProcessingTime(), route.getMaxProcessingTime(), route.getTotalProcessingTime(), 0)); // output in reverse order which prints the route as we want for (int i = route.getProcessorStats().size() - 1; i &gt;= 0; i--) { ProcessorStatDump ps = route.getProcessorStats().get(i); // the self time is the total time of the processor itself long selfTime = ps.getTotalProcessingTime(); // indent route id with 2 spaces System.out.println(String.format(OUTPUT_FORMAT, " " + ps.getId(), ps.getExchangesCompleted(), ps.getExchangesFailed(), ps.getLastProcessingTime(), ps.getMeanProcessingTime(), ps.getMinProcessingTime(), ps.getMaxProcessingTime(), selfTime)); } } } else { System.out.println(""); System.out.println(StringEscapeUtils.unescapeJava("\u001B[31mJMX Agent of Camel is not reachable. Maybe it has been disabled on the Camel context")); System.out.println(StringEscapeUtils.unescapeJava("In consequence, profile are not available.\u001B[0m")); } } return null; 
       </objectname>
      </objectname></td> 
    </tr>
   </tbody>
  </table>  
 </body>
</html>